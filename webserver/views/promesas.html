<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
  
  <canvas id="myChart"></canvas>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
  <script>

    var url = 'https://api.iextrading.com/1.0/stock/amzn/chart';
    fetch(url)
    .then(res=>{
      if(!res.ok) return Promise.reject(res.statusText);
      return res.json();
    })
    .then(data=>{
      console.log(data);
      printTheChart(data);
    })
    .catch(err=>console.log(err))

    let printTheChart = ((stockData) => { //esta funcion salio de la documentacion.
      let stockLabels = stockData.map( element => element.date);
      let stockPrice = stockData.map( element => element.close);
      let ctx = document.getElementById('myChart').getContext('2d');
      let chart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: stockLabels,
          datasets: [{
            label: "Stock Chart",
            backgroundColor: 'rgb(255, 99, 132)',
            borderColor: 'rgb(255, 99, 132)',
            data: stockPrice,
          }]
        }
      });
    });

        var url2 = 'https://ih-crud-api.herokuapp.com/characters';
        

        var lili = {
            "name": "#Lili team",
            "occupation": "Manipulation",
            "debt": false,
            "weapon": "loveliness"
          }

        fetch(url2, {
          method:'POST',
          headers:{
            "Content-Type": "application/json"
          },
          body: JSON.stringify(lili) //esto convierte el objeto a json
        })
        .then(res=>{
        if(!res.ok) return Promise.reject(res.statusText);
        return res.json();
      })
        .then(data=>{
        console.log(data);
      })
        .catch(err=>console.log(err))

        var url3 = 'https://ih-crud-api.herokuapp.com/characters/2608'

                fetch(url3, {
          method:'DELETE',
          headers:{
            "Content-Type": "application/json"
          },
        })
        .then(res=>{
        if(!res.ok) return Promise.reject(res.statusText);
        return res.json();
      })
        .then(data=>{
        console.log(data);
      })
        .catch(err=>console.log(err))

    
  </script>

</body>
</html>